{"version":3,"sources":["Covid19/Covid19EventType.ts","AreaData/AreaDataStatus.ts","Covid19/Covid19Context.ts","Covid19/Covid19State.ts","AreaData/AreaDataRejectedEvent.ts","CoronovirusDataGovUkApi/LowerTierLocalAuthorityAreaName.ts","AreaData/AreaDataRequestedEvent.ts","AreaData/AreaDataResolvedEvent.ts","TimeFrame/TimeFrameChangedEvent.ts","Covid19/Covid19Event.ts","DataNode/Node.tsx","CoronovirusDataGovUkApi/CoronovirusDataGovUkEnvironment.ts","TimeFrame/useTimeFrame.ts","config.ts","CoronovirusDataGovUkApi/DataApi.ts","AreaData/Covid19AreaData.ts","DataNode/NewCasesBySpecimenDateDataNode.tsx","DataNode/NoDataNode.tsx","DataNode/GreaterManchesterDataNodeCanvas.tsx","TimeFrame/TimeFrameControl.tsx","App.tsx","index.tsx"],"names":["Covid19EventType","AreaDataStatus","DEFAULT_COVID_19_CONTEXT_VALUE","dispatch","Error","state","timeFrame","data","Covid19Context","createContext","useCovid19Dispatch","useContext","useCovid19State","LowerTierLocalAuthorityAreaName","AreaDataRejectedEvent","area","type","AREA_DATA_REJECTED","this","handleAreaDataRejectedEvent","event","status","ERROR","AreaDataRequestedEvent","AREA_DATA_REQUESTED","handleAreaDataRequestedEvent","FETCHING","AreaDataResolvedEvent","AREA_DATA_RESOLVED","handleAreaDataResolvedEvent","COMPLETE","TimeFrameChangedEvent","TIME_FRAME_CHANGED","handleTimeFrameChangedEvent","handleCovid19Event","undefined","CoronovirusDataGovUkEnvironment","Node","backgroundColor","className","style","borderBottomColor","data-testid","borderTopColor","useTimeFrame","getCoronovirusDataGovUkEnvironment","PRODUCTION","DATA_URL","STAGING_URL","getLowerTierLocalAuthorityNewCasesBySpecimanDate","areaName","a","baseUrl","url","fetch","response","json","NewCasesBySpecimenDateDataNode","covid19Dispatch","covid19State","useEffect","useCovid19AreaData","color","useMemo","length","Math","max","newCasesBySpecimenDate","NoDataNode","GreaterManchesterNodeCanvas","Bolton","Rochdale","Wigan","Bury","Salford","Oldham","Manchester","Tameside","Trafford","Stockport","BASE_DATE_TIME","Date","UTC","TimeFrameControl","daysSinceBaseDate","floor","now","MILLIS_PER_SECOND","toISOString","substring","aria-label","onChange","e","preventDefault","parseInt","target","value","min","App","useReducer","covid19Context","textAlign","Provider","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"sLAAYA,ECAAC,E,+CCSNC,G,MAAsD,CACxDC,SAAU,WACN,MAAM,IAAIC,MAAM,mDAEpBC,MCA4C,CAC5CC,UAAW,EACXC,KAAM,MDCGC,EAAiBC,wBAAmCP,GAEpDQ,EAAqB,WAE9B,OADqBC,qBAAWH,GAAxBL,UAICS,EAAkB,WAE3B,OADkBD,qBAAWH,GAArBH,O,+BFxBAL,O,6CAAAA,I,2CAAAA,I,2CAAAA,I,4CAAAA,M,cCAAC,O,uBAAAA,I,uBAAAA,I,kBAAAA,M,KGKL,ICLKY,EDKCC,EAIT,WAAYC,GAAwC,yBAH3CC,KAAOhB,EAAiBiB,mBAGkB,KAF1CF,UAE0C,EAC/CG,KAAKH,KAAOA,GAIPI,EAA8B,SAACd,EAAqBe,GAC7D,OAAO,2BACAf,GADP,IAEIE,KAAK,2BACEF,EAAME,MADT,kBAECa,EAAML,KAAO,CACVM,OAAQpB,EAAeqB,YEf1BC,EAIT,WAAYR,GAAwC,yBAH3CC,KAAOhB,EAAiBwB,oBAGkB,KAF1CT,UAE0C,EAC/CG,KAAKH,KAAOA,GAIPU,EAA+B,SAACpB,EAAqBe,GAC9D,OAAO,2BACAf,GADP,IAEIE,KAAK,2BACEF,EAAME,MADT,kBAECa,EAAML,KAAO,CACVM,OAAQpB,EAAeyB,eCd1BC,EAKT,WAAYZ,EAAuCR,GAAsC,yBAJhFS,KAAOhB,EAAiB4B,mBAIuD,KAH/Eb,UAG+E,OAF/ER,UAE+E,EACpFW,KAAKH,KAAOA,EACZG,KAAKX,KAAOA,GAIPsB,EAA8B,SAACxB,EAAqBe,GAC7D,OAAO,2BACAf,GADP,IAEIE,KAAK,2BACEF,EAAME,MADT,kBAECa,EAAML,KAAO,CACVM,OAAQpB,EAAe6B,SACvBvB,KAAMa,EAAMb,WCrBfwB,EAIT,WAAYzB,GAAoB,yBAHvBU,KAAOhB,EAAiBgC,mBAGF,KAFtB1B,eAEsB,EAC3BY,KAAKZ,UAAYA,GAIZ2B,EAA8B,SAAC5B,EAAqBe,GAC7D,OAAO,2BACAf,GADP,IAEIC,UAAWc,EAAMd,aCFZ4B,EAAqB,WAA8E,IAA7E7B,EAA4E,uDNA/D,CAC5CC,UAAW,EACXC,KAAM,IMF8Da,EAAuC,uCAC3G,QAAce,IAAVf,EACA,OAAOf,EAGX,OAAQe,EAAMJ,MACV,KAAKhB,EAAiBwB,oBAAqB,OAAOC,EAA6BpB,EAAOe,GACtF,KAAKpB,EAAiBiB,mBAAoB,OAAOE,EAA4Bd,EAAOe,GACpF,KAAKpB,EAAiB4B,mBAAoB,OAAOC,EAA4BxB,EAAOe,GACpF,KAAKpB,EAAiBgC,mBAAoB,OAAOC,EAA4B5B,EAAOe,GACpF,QAAS,OAAOf,K,SJvBZQ,K,gBAAAA,E,YAAAA,E,wBAAAA,E,gBAAAA,E,oBAAAA,E,kBAAAA,E,sBAAAA,E,oBAAAA,E,oBAAAA,E,eAAAA,M,KKQL,ICRKuB,EDQCC,EAAO,SAAC,GAA0D,IAAD,IAAvDC,uBAAuD,MAArC,cAAqC,EAAtBvB,EAAsB,EAAtBA,KACpD,OACI,yBAAKwB,UAAU,QACX,yBAAKA,UAAU,WAAWC,MAAO,CAAEC,kBAAmBH,GAAmBI,cAAY,aACrF,yBAAKH,UAAU,cAAcC,MAAO,CAAEG,eAAgBL,GAAmBI,cAAY,qBACzEP,IAATpB,GAAwB,yBAAKwB,UAAU,aAAaxB,KEXtD6B,EAAe,WAExB,OADchC,IACDN,W,iCDJL8B,O,2BAAAA,I,sBAAAA,M,KEEL,IAAMS,EAAqC,WAC9C,OAAOT,EAAgCU,YCErCC,EAAW,8CACXC,EAAc,sDAQb,SAAeC,EAAtB,kC,4CAAO,WAAgEC,GAAhE,uBAAAC,EAAA,6DACGC,EAAUP,MAAyCT,EAAgCU,WACrFC,EACAC,EACEK,EAJH,UAIYD,EAJZ,2CAIsDF,EAJtD,yFAKoBI,MAAMD,GAL1B,cAKGE,EALH,gBAMwDA,EAASC,OANjE,uBAMKjD,EANL,EAMKA,KANL,kBAOIA,GAPJ,6C,sBCLA,ICEMkD,EAAiC,SAAC,GAAmD,IAAjD1C,EAAgD,EAAhDA,KAAgD,EDF/D,SAACA,GAA2C,IAAD,IACnE2C,EAAkBhD,IAClBiD,EAAe/C,IAerB,OAbAgD,qBAAU,WACNF,EAAgB,IAAInC,EAAuBR,IAC3C,sBAAC,4BAAAoC,EAAA,+EAE0BF,EAAiDlC,GAF3E,OAEaR,EAFb,OAGOmD,EAAgB,IAAI/B,EAAsBZ,EAAMR,IAHvD,gDAMOmD,EAAgB,IAAI5C,EAAsBC,IANjD,wDAAD,KASD,CAACA,EAAM2C,IAEH,CACHrC,QAAQ,UAAAsC,EAAapD,KAAKQ,UAAlB,eAAyBM,SAAUpB,EAAeyB,SAC1DnB,MAAM,UAAAoD,EAAapD,KAAKQ,UAAlB,eAAyBR,OAAQ,IChBlBsD,CAAmB9C,GAApCM,EADqF,EACrFA,OAAQd,EAD6E,EAC7EA,KACVD,EAAYsC,IAEZkB,EAAQC,mBAAQ,WAClB,OAAI1C,IAAWpB,EAAeyB,SACnB,OACAL,IAAWpB,EAAeqB,MAC1B,QACGf,GAAQD,GAAaC,EAAKyD,OAC7B,OAED,OAAN,OAAcC,KAAKC,IAAI,EAAG,KAAgD,EAAzC3D,EAAKD,GAAW6D,yBAAjD,iBAEL,CAAC9C,EAAQd,EAAMD,IAElB,OAAQ,kBAAC,EAAD,CAAMgC,gBAAiBwB,EAAO/C,KAAMA,KCxBnCqD,EAAa,kBAAO,kBAAC,EAAD,OCEpBC,EAA8B,WACvC,OAAQ,yBAAK9B,UAAU,eACnB,yBAAKA,UAAU,YACX,kBAAC,EAAD,OAEJ,yBAAKA,UAAU,YACX,kBAAC,EAAD,CAAgCxB,KAAMF,EAAgCyD,SACtE,kBAAC,EAAD,CAAgCvD,KAAMF,EAAgC0D,WACtE,kBAAC,EAAD,OAEJ,yBAAKhC,UAAU,YACX,kBAAC,EAAD,CAAgCxB,KAAMF,EAAgC2D,QACtE,kBAAC,EAAD,CAAgCzD,KAAMF,EAAgC4D,OACtE,kBAAC,EAAD,OAEJ,yBAAKlC,UAAU,YACX,kBAAC,EAAD,CAAgCxB,KAAMF,EAAgC6D,UACtE,kBAAC,EAAD,CAAgC3D,KAAMF,EAAgC8D,SACtE,kBAAC,EAAD,OAEJ,yBAAKpC,UAAU,YACX,kBAAC,EAAD,MACA,kBAAC,EAAD,CAAgCxB,KAAMF,EAAgC+D,aACtE,kBAAC,EAAD,CAAgC7D,KAAMF,EAAgCgE,YAE1E,yBAAKtC,UAAU,YACX,kBAAC,EAAD,CAAgCxB,KAAMF,EAAgCiE,WACtE,kBAAC,EAAD,CAAgC/D,KAAMF,EAAgCkE,YACtE,kBAAC,EAAD,OAEJ,yBAAKxC,UAAU,YACX,kBAAC,EAAD,SC1BNyC,EAAiBC,KAAKC,IAAI,KAAM,EAAG,GAI5BC,EAAmB,WAE5B,IAAMhF,EAAWO,IACXJ,EAAYsC,IACZwC,EAAoBnB,KAAKoB,OAAOJ,KAAKK,MAAQN,GANhCO,OAanB,OAAQ,yBAAKhD,UAAU,sBACnB,6BAAM,IAAI0C,KAAKD,EAdAO,MAckBjF,GAA6BkF,cAAcC,UAAU,EAAG,KACzF,2BAAOzE,KAAK,QAAQ0E,aAAW,cAAcC,SAPhC,SAACC,GACdA,EAAEC,iBACF1F,EAAS,IAAI4B,EAAsB+D,SAASF,EAAEG,OAAOC,UAKYA,MAAO1F,EAAW2F,IAAI,IAAI/B,IAAKkB,MCAzFc,EAnBH,WAAO,IAAD,EAEwBC,qBAAWjE,EjBGL,CAC5C5B,UAAW,EACXC,KAAM,KiBPQ,mBAEToD,EAFS,KAEKD,EAFL,KAIV0C,EAAiBrC,mBAAQ,iBAAO,CACpC5D,SAAUuD,EACVrD,MAAOsD,KACL,CAACD,EAAiBC,IAEtB,OACE,yBAAKpB,UAAU,MAAMC,MAAO,CAAE6D,UAAW,WACvC,kBAAC7F,EAAe8F,SAAhB,CAAyBN,MAAOI,GAC9B,kBAAC,EAAD,MACA,kBAAC,EAAD,SChBRG,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,U","file":"static/js/main.16a63ebe.chunk.js","sourcesContent":["export enum Covid19EventType {\n    AREA_DATA_REQUESTED,\n    AREA_DATA_REJECTED,\n    AREA_DATA_RESOLVED,\n    TIME_FRAME_CHANGED,\n}","export enum AreaDataStatus {\n    FETCHING,\n    COMPLETE,\n    ERROR,\n};","import { createContext, Dispatch, useContext } from \"react\";\nimport { Covid19Event } from './Covid19Event';\nimport { Covid19State, createDefaultCovid19State } from './Covid19State';\n\ninterface Covid19ContextValue { \n    dispatch: Dispatch<Covid19Event>;\n    state: Covid19State;\n};\n\nconst DEFAULT_COVID_19_CONTEXT_VALUE: Covid19ContextValue = {\n    dispatch: () => {\n        throw new Error('Create Covid19Context dispatch with useReducer');\n    },\n    state: createDefaultCovid19State(),\n}\n\nexport const Covid19Context = createContext<Covid19ContextValue>(DEFAULT_COVID_19_CONTEXT_VALUE);\n\nexport const useCovid19Dispatch = () => {\n    const { dispatch } = useContext(Covid19Context);\n    return dispatch;\n}\n\nexport const useCovid19State = () => {\n    const { state } = useContext(Covid19Context);\n    return state;\n}","import { AreaDataStatus } from '../AreaData/AreaDataStatus';\nimport { NewCasesBySpecimenDateDatum } from \"../CoronovirusDataGovUkApi/NewCasesBySpecimenDateDatum\";\n\nexport interface Covid19State {\n    timeFrame: number;\n    data: {\n        [key: string]: {\n            status: AreaDataStatus;\n            data?: NewCasesBySpecimenDateDatum[];\n        };\n    };\n}\n\nexport const createDefaultCovid19State = () => ({\n    timeFrame: 0,\n    data: {}\n});","import { Covid19EventType } from '../Covid19/Covid19EventType';\nimport { Covid19State } from '../Covid19/Covid19State';\nimport { LowerTierLocalAuthorityAreaName } from '../CoronovirusDataGovUkApi/LowerTierLocalAuthorityAreaName';\nimport { AreaDataStatus } from './AreaDataStatus';\n\nexport class AreaDataRejectedEvent {\n    readonly type = Covid19EventType.AREA_DATA_REJECTED;\n    readonly area: LowerTierLocalAuthorityAreaName;\n\n    constructor(area: LowerTierLocalAuthorityAreaName) {\n        this.area = area;\n    }\n}\n\nexport const handleAreaDataRejectedEvent = (state: Covid19State, event: AreaDataRejectedEvent): Covid19State => {\n    return {\n        ...state,\n        data: {\n            ...state.data,\n            [event.area]: {\n                status: AreaDataStatus.ERROR,\n            },\n        },\n    };\n}","export enum LowerTierLocalAuthorityAreaName {\n    Bolton = 'Bolton',\n    Bury = 'Bury',\n    Manchester = 'Manchester',\n    Oldham = 'Oldham',\n    Rochdale = 'Rochdale',\n    Salford = 'Salford',\n    Stockport = 'Stockport',\n    Tameside = 'Tameside',\n    Trafford = 'Trafford',\n    Wigan = 'Wigan',\n}","import { Covid19EventType } from '../Covid19/Covid19EventType';\nimport { Covid19State } from '../Covid19/Covid19State';\nimport { LowerTierLocalAuthorityAreaName } from '../CoronovirusDataGovUkApi/LowerTierLocalAuthorityAreaName';\nimport { AreaDataStatus } from './AreaDataStatus';\n\nexport class AreaDataRequestedEvent {\n    readonly type = Covid19EventType.AREA_DATA_REQUESTED;\n    readonly area: LowerTierLocalAuthorityAreaName;\n\n    constructor(area: LowerTierLocalAuthorityAreaName) {\n        this.area = area;\n    }\n}\n\nexport const handleAreaDataRequestedEvent = (state: Covid19State, event: AreaDataRequestedEvent): Covid19State => {\n    return {\n        ...state,\n        data: {\n            ...state.data,\n            [event.area]: {\n                status: AreaDataStatus.FETCHING,\n            },\n        },\n    };\n}","import { NewCasesBySpecimenDateDatum } from '../CoronovirusDataGovUkApi/NewCasesBySpecimenDateDatum';\nimport { Covid19EventType } from '../Covid19/Covid19EventType';\nimport { Covid19State } from '../Covid19/Covid19State';\nimport { LowerTierLocalAuthorityAreaName } from '../CoronovirusDataGovUkApi/LowerTierLocalAuthorityAreaName';\nimport { AreaDataStatus } from './AreaDataStatus';\n\nexport class AreaDataResolvedEvent {\n    readonly type = Covid19EventType.AREA_DATA_RESOLVED;\n    readonly area: LowerTierLocalAuthorityAreaName;\n    readonly data: NewCasesBySpecimenDateDatum[];\n\n    constructor(area: LowerTierLocalAuthorityAreaName, data: NewCasesBySpecimenDateDatum[]) {\n        this.area = area;\n        this.data = data;\n    }\n}\n\nexport const handleAreaDataResolvedEvent = (state: Covid19State, event: AreaDataResolvedEvent): Covid19State => {\n    return {\n        ...state,\n        data: {\n            ...state.data,\n            [event.area]: {\n                status: AreaDataStatus.COMPLETE,\n                data: event.data,\n            },\n        },\n    };\n}","import { Covid19EventType } from '../Covid19/Covid19EventType';\nimport { Covid19State } from '../Covid19/Covid19State';\n\nexport class TimeFrameChangedEvent {\n    readonly type = Covid19EventType.TIME_FRAME_CHANGED;\n    readonly timeFrame: number;\n\n    constructor(timeFrame: number) {\n        this.timeFrame = timeFrame;\n    }\n}\n\nexport const handleTimeFrameChangedEvent = (state: Covid19State, event: TimeFrameChangedEvent): Covid19State => {\n    return {\n        ...state,\n        timeFrame: event.timeFrame,\n    };\n}","import { AreaDataRejectedEvent, handleAreaDataRejectedEvent } from '../AreaData/AreaDataRejectedEvent';\nimport { AreaDataRequestedEvent, handleAreaDataRequestedEvent } from '../AreaData/AreaDataRequestedEvent';\nimport { AreaDataResolvedEvent, handleAreaDataResolvedEvent } from '../AreaData/AreaDataResolvedEvent';\nimport { handleTimeFrameChangedEvent, TimeFrameChangedEvent } from '../TimeFrame/TimeFrameChangedEvent';\nimport { Covid19EventType } from './Covid19EventType';\nimport { createDefaultCovid19State, Covid19State } from './Covid19State';\n\nexport type Covid19Event =\n    TimeFrameChangedEvent |\n    AreaDataRequestedEvent |\n    AreaDataResolvedEvent |\n    AreaDataRejectedEvent;\n\nexport const handleCovid19Event = (state = createDefaultCovid19State(), event?: Covid19Event): Covid19State => {\n    if (event === undefined) {\n        return state;\n    }\n\n    switch (event.type) {\n        case Covid19EventType.AREA_DATA_REQUESTED: return handleAreaDataRequestedEvent(state, event);\n        case Covid19EventType.AREA_DATA_REJECTED: return handleAreaDataRejectedEvent(state, event);\n        case Covid19EventType.AREA_DATA_RESOLVED: return handleAreaDataResolvedEvent(state, event);\n        case Covid19EventType.TIME_FRAME_CHANGED: return handleTimeFrameChangedEvent(state, event);\n        default: return state;\n    };\n}","import React from 'react';\nimport { LowerTierLocalAuthorityAreaName } from '../CoronovirusDataGovUkApi/LowerTierLocalAuthorityAreaName';\n\ninterface NodeProps {\n    backgroundColor?: string;\n    area?: LowerTierLocalAuthorityAreaName;\n}\n\nexport const Node = ({ backgroundColor = 'transparent', area }: NodeProps) => {\n    return (\n        <div className='node'>\n            <div className='node-top' style={{ borderBottomColor: backgroundColor }} data-testid='node-top' ></div>\n            <div className='node-bottom' style={{ borderTopColor: backgroundColor }} data-testid='node-bottom'></div>\n            { (area !== undefined) && (<div className='node-text'>{area}</div>) }\n        </div>\n    );\n}\n\n\n\n\n","export enum CoronovirusDataGovUkEnvironment {\n    PRODUCTION,\n    STAGING,\n}","import { useCovid19State } from '../Covid19/Covid19Context';\n\nexport const useTimeFrame = () => {\n    const state = useCovid19State();\n    return state.timeFrame;\n};","import { CoronovirusDataGovUkEnvironment } from './CoronovirusDataGovUkApi/CoronovirusDataGovUkEnvironment';\n\nexport const getCoronovirusDataGovUkEnvironment = (): CoronovirusDataGovUkEnvironment => {\n    return CoronovirusDataGovUkEnvironment.PRODUCTION;\n}","import { CoronovirusDataGovUkEnvironment } from './CoronovirusDataGovUkEnvironment';\nimport { LowerTierLocalAuthorityAreaName } from \"./LowerTierLocalAuthorityAreaName\";\nimport { NewCasesBySpecimenDateDatum } from './NewCasesBySpecimenDateDatum';\nimport { getCoronovirusDataGovUkEnvironment } from '../config';\n\nconst DATA_URL = 'https://api.coronavirus.data.gov.uk/v1/data';\nconst STAGING_URL = 'https://api.coronavirus-staging.data.gov.uk/v1/data';\n\ninterface NewCasesBySpecimanDateResponseBody {\n    length: number;\n    maxPageLimit: number;\n    data: NewCasesBySpecimenDateDatum[];\n}\n\nexport async function getLowerTierLocalAuthorityNewCasesBySpecimanDate(areaName: LowerTierLocalAuthorityAreaName): Promise<NewCasesBySpecimenDateDatum[]> {\n    const baseUrl = getCoronovirusDataGovUkEnvironment() === CoronovirusDataGovUkEnvironment.PRODUCTION ?\n        DATA_URL :\n        STAGING_URL;\n    const url = `${baseUrl}?filters=areaType=ltla;areaName=${areaName}&structure={\"date\":\"date\",\"newCasesBySpecimenDate\":\"newCasesBySpecimenDate\"}`;\n    const response = await fetch(url);\n    const { data }: NewCasesBySpecimanDateResponseBody = await response.json();\n    return data;\n}","import { useEffect } from 'react';\nimport { getLowerTierLocalAuthorityNewCasesBySpecimanDate } from '../CoronovirusDataGovUkApi/DataApi';\nimport { LowerTierLocalAuthorityAreaName } from '../CoronovirusDataGovUkApi/LowerTierLocalAuthorityAreaName';\nimport { useCovid19Dispatch, useCovid19State } from '../Covid19/Covid19Context';\nimport { AreaDataRejectedEvent } from './AreaDataRejectedEvent';\nimport { AreaDataRequestedEvent } from './AreaDataRequestedEvent';\nimport { AreaDataResolvedEvent } from './AreaDataResolvedEvent';\nimport { AreaDataStatus } from './AreaDataStatus';\n\nexport const useCovid19AreaData = (area: LowerTierLocalAuthorityAreaName) => {\n    const covid19Dispatch = useCovid19Dispatch();\n    const covid19State = useCovid19State();\n\n    useEffect(() => {\n        covid19Dispatch(new AreaDataRequestedEvent(area));\n        (async function () {\n            try {\n                const data = await getLowerTierLocalAuthorityNewCasesBySpecimanDate(area);\n                covid19Dispatch(new AreaDataResolvedEvent(area, data));\n            }\n            catch (e: unknown) {\n                covid19Dispatch(new AreaDataRejectedEvent(area));\n            }\n        })();\n    }, [area, covid19Dispatch]);\n\n    return {\n        status: covid19State.data[area]?.status || AreaDataStatus.FETCHING,\n        data: covid19State.data[area]?.data || [],\n    };\n}","import React, { useMemo } from 'react';\nimport { Node } from './Node';\nimport { LowerTierLocalAuthorityAreaName } from '../CoronovirusDataGovUkApi/LowerTierLocalAuthorityAreaName';\nimport { AreaDataStatus } from '../AreaData/AreaDataStatus';\nimport { useTimeFrame } from '../TimeFrame/useTimeFrame';\nimport { useCovid19AreaData } from '../AreaData/Covid19AreaData';\n\ninterface NewCasesBySpecimenDateDataNodeProps {\n    area: LowerTierLocalAuthorityAreaName;\n}\n\nexport const NewCasesBySpecimenDateDataNode = ({ area }: NewCasesBySpecimenDateDataNodeProps) => {\n    const { status, data } = useCovid19AreaData(area);\n    const timeFrame = useTimeFrame();\n\n    const color = useMemo(() => {\n        if (status === AreaDataStatus.FETCHING) {\n            return '#eef';\n        } else if (status === AreaDataStatus.ERROR) {\n            return '#fee';\n        } else if (!!!data || timeFrame >= data.length) {\n            return '#eee';\n        } else {\n            return `rgb(${Math.max(0, 255 - (data[timeFrame].newCasesBySpecimenDate ^ 3))}, 255, 255)`;\n        }\n    }, [status, data, timeFrame])\n\n    return (<Node backgroundColor={color} area={area} />)\n};","import React from 'react';\nimport { Node } from './Node';\n\nexport const NoDataNode = () => (<Node />);","import React from 'react';\nimport { LowerTierLocalAuthorityAreaName } from '../CoronovirusDataGovUkApi/LowerTierLocalAuthorityAreaName';\nimport { NewCasesBySpecimenDateDataNode } from './NewCasesBySpecimenDateDataNode';\nimport { NoDataNode } from './NoDataNode';\n\nexport const GreaterManchesterNodeCanvas = () => {\n    return (<div className='node-canvas'>\n        <div className='node-row'>\n            <NoDataNode />\n        </div>\n        <div className='node-row'>\n            <NewCasesBySpecimenDateDataNode area={LowerTierLocalAuthorityAreaName.Bolton} />\n            <NewCasesBySpecimenDateDataNode area={LowerTierLocalAuthorityAreaName.Rochdale} />\n            <NoDataNode />\n        </div>\n        <div className='node-row'>\n            <NewCasesBySpecimenDateDataNode area={LowerTierLocalAuthorityAreaName.Wigan} />\n            <NewCasesBySpecimenDateDataNode area={LowerTierLocalAuthorityAreaName.Bury} />\n            <NoDataNode />\n        </div>\n        <div className='node-row'>\n            <NewCasesBySpecimenDateDataNode area={LowerTierLocalAuthorityAreaName.Salford} />\n            <NewCasesBySpecimenDateDataNode area={LowerTierLocalAuthorityAreaName.Oldham} />\n            <NoDataNode />\n        </div>\n        <div className='node-row'>\n            <NoDataNode />\n            <NewCasesBySpecimenDateDataNode area={LowerTierLocalAuthorityAreaName.Manchester} />\n            <NewCasesBySpecimenDateDataNode area={LowerTierLocalAuthorityAreaName.Tameside} />\n        </div>\n        <div className='node-row'>\n            <NewCasesBySpecimenDateDataNode area={LowerTierLocalAuthorityAreaName.Trafford} />\n            <NewCasesBySpecimenDateDataNode area={LowerTierLocalAuthorityAreaName.Stockport} />\n            <NoDataNode />\n        </div>\n        <div className='node-row'>\n            <NoDataNode />\n        </div>\n    </div>);\n};\n","import React, { ChangeEvent } from 'react';\nimport { useCovid19Dispatch } from '../Covid19/Covid19Context';\nimport { TimeFrameChangedEvent } from './TimeFrameChangedEvent';\nimport { useTimeFrame } from './useTimeFrame';\n\nconst MILLIS_PER_SECOND = 1000;\nconst SECONDS_PER_MINUTE = 60;\nconst MINUTES_PER_HOUR = 60;\nconst HOURS_PER_DAY = 24;\n\nconst BASE_DATE_TIME = Date.UTC(2020, 2, 1);\n\nconst MILLIS_PER_DAY = MILLIS_PER_SECOND * SECONDS_PER_MINUTE * MINUTES_PER_HOUR * HOURS_PER_DAY;\n\nexport const TimeFrameControl = () => {\n\n    const dispatch = useCovid19Dispatch();\n    const timeFrame = useTimeFrame();\n    const daysSinceBaseDate = Math.floor((Date.now() - BASE_DATE_TIME) / MILLIS_PER_DAY);\n\n    const onChange = (e: ChangeEvent<HTMLInputElement>) => {\n        e.preventDefault();\n        dispatch(new TimeFrameChangedEvent(parseInt(e.target.value)));\n    };\n\n    return (<div className='time-frame-control'>\n        <div>{new Date(BASE_DATE_TIME + (timeFrame * MILLIS_PER_DAY)).toISOString().substring(0, 10)}</div>\n        <input type='range' aria-label='input-range' onChange={onChange} value={timeFrame} min='0' max={daysSinceBaseDate} />\n    </div>);\n}","import React, { useMemo, useReducer } from 'react';\nimport './App.scss';\nimport { Covid19Context } from './Covid19/Covid19Context';\nimport { handleCovid19Event } from './Covid19/Covid19Event';\nimport { createDefaultCovid19State } from './Covid19/Covid19State';\nimport { GreaterManchesterNodeCanvas } from './DataNode/GreaterManchesterDataNodeCanvas';\nimport { TimeFrameControl } from './TimeFrame/TimeFrameControl';\n\nconst App = () => {\n\n  const [covid19State, covid19Dispatch] = useReducer(handleCovid19Event, createDefaultCovid19State());\n\n  const covid19Context = useMemo(() => ({\n    dispatch: covid19Dispatch,\n    state: covid19State,\n  }), [covid19Dispatch, covid19State]);\n\n  return (\n    <div className=\"App\" style={{ textAlign: 'center' }}>\n      <Covid19Context.Provider value={covid19Context}>\n        <GreaterManchesterNodeCanvas />\n        <TimeFrameControl />\n      </Covid19Context.Provider>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}